<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view contentType="text/html">
	<h:head>
		<title>.:: Curso JSF com Spring Boot::.</title>
		<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
		<link href="#{resource['images/favicon.ico']}" rel="shortcut icon" />
		<h:outputStylesheet name="#{resource[style.css]}" />
	</h:head>
	<h:body>
		<h:form id="frmCliente">
			Nome: <h:inputText value="#{clienteController.cliente.nome}" />
			
			Estado: 
			<h:selectOneMenu value="#{clienteController.cliente.estado}" converter="#{estadoConverter}">
					<f:selectItem value="#{null}"  noSelectionOption="true" itemLabel=".: Selecione :."/>
					<f:selectItems value="#{estadoController.estados}"  itemLabel="#{e.uf}" var="e"/> 
			</h:selectOneMenu>
			Email:<h:inputText value="#{clienteController.cliente.email}" />

			<h:commandButton action="#{clienteController.salvar}"
				value="Salvar">
				<f:ajax execute="frmCliente" render="frmCliente" />
			</h:commandButton>

			<h:commandButton action="#{clienteController.cancelar}"
				value="Cancelar" rendered="#{clienteController.modoEdicao}">
				<f:ajax render="frmCliente" />
			</h:commandButton>


			<h:dataTable id="tbClientes" value="#{clienteController.clientes}"
				var="c">
				<h:column>
					<f:facet name="header">ID</f:facet>
						#{c.id}
					</h:column>
				<h:column>
					<f:facet name="header">Nome</f:facet>
						#{c.nome}
					</h:column>
				<h:column>
					<f:facet name="header">E-mail</f:facet>
						#{c.email}
					</h:column>
					
					<h:column>
					<f:facet name="header">UF</f:facet>
						#{c.estado.uf}
					</h:column>
				<h:column>
					<h:commandLink value="Editar"
						action="#{clienteController.editar(c)}">
						<f:ajax render="frmCliente" />
					</h:commandLink>
					
					<h:commandLink value="Excluir"
						action="#{clienteController.excluir(c)}" onclick="return confirm('Tem Certeza que deseja excluir?')">
						<f:ajax render="frmCliente:tbClientes" />
					</h:commandLink>

				</h:column>


			</h:dataTable>

		</h:form>
	</h:body>

</f:view>
</html>
